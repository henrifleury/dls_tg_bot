поток 1 забирает сообщения с картинкой и сохраняет сообщения в папку inputs, имя файла начинается с message_id и chat_id
поток 2 просматривает папку inputs, забирает первое изображение из сохраненных (сортировка по по номеру сообщения?) и супер резолютит его и сохраняет в results, из inputs удаляет
поток 3 просматривает results, парсит наименование и ответом на messag_id в chat_id высылает улучшенное изображение

устойчивость бота обеспечивается через промежуточное сохранение файлов - после перезагрузки бот смотрит изображения в results

в первом приближении потоков и восстановления бота не будет
в первом приближении из сообщений с несколькими изображениями будет обюрабатываться первое
